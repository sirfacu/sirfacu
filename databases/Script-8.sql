# usuario monitor de proxysql
alter USER 'user_proxysql'@'%' IDENTIFIED BY '!65TPF@s0CupnlW';
GRANT Replication client ON *.* TO 'user_proxysql'@'%';



ALTER USER admin_ubits IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER andrescramirez IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER bsmedina IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER cakle IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER cburbano IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER crodriguez IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER crrincon IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER edelgado IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER jgranados IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER jpolanco IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER jrios IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER jsanchez IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER juanh IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER laguilar IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER lavargas IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER macarrillo IDENTIFIED BY "$1rF4(u%*";
ALTER USER mrodriguez IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER sgomez IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_360 IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_360_assess IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_360_assessments IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_analitycs IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_assessments IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_etl_360_analitycs IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_etl_goals_analitycs IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER user_goals IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER qa_ypacanchique IDENTIFIED BY "liW+-o0SJqDl28g+";


drop user 'crrincon'@'%';
drop user 'wmosquera'@'%';
drop user 'ypacanchique'@'%';
drop user 'sgomez'@'%';
drop user 'juanh'@'%';
drop user 'haparicio'@'%';
drop user 'vjuspian'@'%';
drop user 'edelgado'@'%';

create user 'qa_crrincon'@'%' IDENTIFIED BY "uTAMDE$9V&0$S=1=";
create user 'qa_wmosquera'@'%' IDENTIFIED BY "kjo&#ph3sE+lzWAX";
create user 'qa_ypacanchique'@'%' IDENTIFIED BY "E_4J3Eg185e6%ilK";
create user 'qa_sgomez'@'%' IDENTIFIED BY "BX+5jtpG437xh#&P";
create user 'qa_juanh'@'%' IDENTIFIED BY "ndQGHbo=wK3muNqD";
create user 'qa_haparicio'@'%' IDENTIFIED BY "9r=jGzjO02tYY0hO";
create user 'qa_vjuspian'@'%' IDENTIFIED BY "1I*pI__^9Z_bidcs";
create user 'qa_edelgado'@'%' IDENTIFIED BY "Unq51o0Tx+j5e-IU";



ALTER USER ytrejos IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER jlemus IDENTIFIED BY "liW+-o0SJqDl28g+";
ALTER USER jdveloz IDENTIFIED BY "liW+-o0SJqDl28g+";

select * from mysql.user where `User` = 'user_student_metrics';


--- creados luego de levantar la db PARA USO EN TEST
CREATE USER user_procedures identified by "t3MP0R4lpWD"; 
GRANT USAGE ON *.* TO 'user_procedures'@'%';
GRANT Execute ON bitnami_moodle.lxp_get_progress_compulsory_courses TO 'user_procedures'@'%';
GRANT Select, Insert, Update ON bitnami_moodle.* TO 'user_procedures'@'%';

######## PS afectados
lxp_get_progress_compulsory_courses
lxp_getstudentmonthlytime
update_accept_terms_and_conditions
lxp_insert_playlist
lxp_patch_user_contact_info
########Lambdas configuradas
student_metrics_most_popular
student_profile_api_competence_preferences_progress



CREATE USER user_student_metrics identified by "gtb5mtmLrmKoNc";
GRANT Select, Insert, Update ON bitnami_moodle.* TO 'user_student_metrics'@'%' 
#se crea en proxysql

GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON goals.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON adminhr.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON bitnami_moodle.* TO 'qa_ypacanchique'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON db_learning_map.* TO 'qa_ypacanchique'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON 360_assessments.* TO 'qa_ypacanchique'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON lms_creator.* TO 'qa_ypacanchique'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON talentdb.* TO 'qa_ypacanchique'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON learning_hub.* TO 'qa_ypacanchique'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON questionnaire.* TO 'qa_ypacanchique'@'%';

GRANT USAGE ON *.* TO 'qa_crrincon'@'%';
GRANT USAGE ON *.* TO 'qa_wmosquera'@'%';
GRANT USAGE ON *.* TO 'qa_ypacanchique'@'%';
GRANT USAGE ON *.* TO 'qa_sgomez'@'%';
GRANT USAGE ON *.* TO 'qa_juanh'@'%';
GRANT USAGE ON *.* TO 'qa_haparicio'@'%';
GRANT USAGE ON *.* TO 'qa_vjuspian'@'%';
GRANT USAGE ON *.* TO 'qa_edelgado'@'%';

GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON goals.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON adminhr.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON bitnami_moodle.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON db_learning_map.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON 360_assessments.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON lms_creator.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON talentdb.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON learning_hub.* TO 'qa_haparicio'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON questionnaire.* TO 'qa_haparicio'@'%';



---------------------------------------------------
GRANT ALL PRIVILEGES ON goals.* TO 'macarrillo'@'%';
GRANT RELOAD ON *.* TO 'macarrillo'@'%';
GRANT FLUSH_TABLES ON *.* TO 'macarrillo'@'%';
GRANT PROCESS ON *.* TO 'macarrillo'@'%';
GRANT LOCK TABLES ON *.* TO 'macarrillo'@'%';
FLUSH PRIVILEGES;
select * from goals.company
-- mysqldump -h test-manual-upgrade-from-prod.cjqpovg6bsbu.us-east-1.rds.amazonaws.com -u macarrillo -p --databases goals 360db assets > talent-db-to-xlearning.sql

select id from adminhr.company where id not in (25,462, 124, 82, 2923, 66, 1835, 2901, 2902)

select id , username, email from bitnami_moodle.mdl_user  where id = 1

select count(mu.id) as users, muc.name 
from bitnami_moodle.mdl_user mu
join bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id 
join bitnami_moodle.mdl_u_company muc on muc.id =muuai.mdl_u_company_id 
where muuai.mdl_u_company_id  in (1448, 1, 3, 5, 9, 15, 16, 17, 19, 20, 23, 44, 45, 47, 49, 50, 53, 60, 61, 65, 67, 71, 73, 74, 81, 83, 86, 93, 94, 95, 101, 102, 110, 112, 113, 115, 117, 119, 120, 122, 123, 125, 127, 128, 150, 156, 163, 168, 184, 206, 214, 218, 227, 246, 247, 248, 251, 261, 265, 266, 269, 271, 281, 296, 308, 330, 338, 350, 358, 364, 373, 396, 406, 433, 465, 466, 486, 500, 509, 511, 514, 524, 544, 551, 558, 560, 563, 590, 591, 614, 619, 640, 642, 648, 656, 664, 673, 674, 680, 701, 716, 727, 729, 735, 736, 744, 751, 761, 766, 772, 778, 779, 788, 790, 791, 792, 794, 796, 809, 812, 819, 821, 828, 836, 837, 840, 845, 853, 865, 867, 868, 869, 872, 877, 882, 886, 889, 892, 904, 907, 908, 915, 918, 920, 922, 924, 928, 938, 939, 942, 953, 957, 959, 962, 966, 968, 969, 975, 976, 979, 982, 983, 985, 1009, 1010, 1013, 1016, 1017, 1024, 1030, 1031, 1033, 1034, 1044, 1046, 1050, 1051, 1052, 1060, 1061, 1065, 1077, 1079, 1091, 1100, 1102, 1109, 1110, 1111, 1113, 1114, 1115, 1116, 1118, 1119, 1135, 1137, 1145, 1153, 1154, 1164, 1169, 1170, 1174, 1178, 1185, 1187, 1194, 1211, 1212, 1214, 1215, 1217, 1229, 1235, 1239, 1258, 1271, 1276, 1282, 1284, 1286, 1287, 1289, 1290, 1293, 1294, 1295, 1296, 1301, 1302, 1304, 1305, 1308, 1309, 1310, 1311, 1314, 1315, 1322, 1327, 1337, 1344, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1359, 1360, 1363, 1365, 1368, 1370, 1371, 1373, 1376, 1380, 1385, 1386, 1388, 1389, 1390, 1392, 1393, 1394, 1397, 1398, 1402, 1403, 1407, 1410, 1411, 1417, 1419, 1420, 1423, 1428, 1432, 1433, 1434, 1435, 1439, 1440, 1445, 1450, 1452, 1453, 1454, 1457, 1458, 1469, 1471, 1473, 1476, 1482, 1483, 1490, 1492, 1502, 1504, 1507, 1508, 1517, 1519, 1520, 1524, 1525, 1527, 1528, 1531, 1532, 1533, 1535, 1536, 1539, 1540, 1541, 1542, 1544, 1545, 1547, 1553, 1557, 1558, 1559, 1562, 1567, 1568, 1569, 1571, 1572, 1573, 1574, 1575, 1579, 1582, 1583, 1586, 1587, 1588, 1592, 1593, 1594, 1598, 1599, 1604, 1607, 1613, 1614, 1616, 1619, 1620, 1621, 1624, 1626, 1627, 1628, 1630, 1631, 1632, 1633, 1636, 1638, 1640, 1644, 1646, 1647, 1649, 1653, 1656, 1657, 1658, 1659, 1661, 1662, 1663, 1665, 1666, 1668, 1670, 1671, 1672, 1676, 1678, 1680, 1683, 1686, 1687, 1688, 1689, 1692, 1695, 1696, 1702, 1706, 1708, 1709, 1711, 1714, 1715, 1716, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1728, 1729, 1731, 1735, 1736, 1739, 1741, 1743, 1744, 1746, 1749, 1750, 1751, 1752, 1753, 1754, 1757, 1758, 1759, 1760, 1761, 1766, 1768, 1770, 1772, 1774, 1775, 1779, 1781, 1782, 1783, 1784, 1789, 1790, 1794, 1795, 1797, 1798, 1799, 1803, 1805, 1807, 1816, 1817, 1818, 1822, 1823, 1824, 1825, 1828, 1829, 1831, 1832, 1838, 1839, 1841, 1842, 1843, 1845, 1847, 1848, 1850, 1852, 1856, 1862, 1863, 1864, 1871, 1872, 1875, 1876, 1878, 1880, 1885, 1886, 1888, 1889, 1890, 1891, 1893, 1894, 1896, 1899, 1900, 1901, 1902, 1904, 1905, 1906, 1907, 1913, 1915, 1916, 1917, 1920, 1923, 1928, 1930, 1933, 1935, 1937, 1939, 1943, 1947, 1949, 1950, 1953, 1954, 1959, 1965, 1970, 1972, 1975, 1980, 1986, 1989, 1993, 1997, 1998, 2000, 2002, 2004, 2005, 2009, 2010, 2016, 2018, 2019, 2020, 2024, 2025, 2028, 2029, 2032, 2034, 2035, 2036, 2044, 2045, 2046, 2047, 2048, 2050, 2054, 2055, 2057, 2059, 2061, 2062, 2063, 2065, 2066, 2067, 2068, 2070, 2072, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2082, 2083, 2084, 2085, 2086, 2087, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2102, 2104, 2106, 2107, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2141, 2142, 2143, 2144, 2148, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2162, 2163, 2165, 2166, 2168, 2169, 2170, 2172, 2173, 2174, 2175, 2176, 2178, 2179, 2180, 2181, 2182, 2183, 2185, 2188, 2192, 2196, 2197, 2198, 2200, 2201, 2203, 2204, 2205, 2207, 2209, 2210, 2211, 2212, 2214, 2215, 2217, 2220, 2221, 2225, 2226, 2228, 2230, 2231, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2249, 2250, 2252, 2256, 2259, 2262, 2263, 2264, 2265, 2266, 2269, 2271, 2272, 2274, 2275, 2276, 2279, 2280, 2290, 2291, 2299, 2300, 2301, 2303, 2304, 2308, 2309, 2310, 2311, 2313, 2314, 2315, 2317, 2319, 2324, 2325, 2326, 2329, 2332, 2333, 2339, 2341, 2345, 2346, 2347, 2352, 2353, 2354, 2355, 2356, 2359, 2365, 2368, 2371, 2376, 2377, 2378, 2382, 2387, 2388, 2389, 2393, 2394, 2395, 2397, 2398, 2399, 2401, 2402, 2403, 2407, 2408, 2409, 2416, 2420, 2421, 2423, 2426, 2431, 2434, 2435, 2439, 2440, 2441, 2444, 2447, 2451, 2454, 2456, 2457, 2459, 2469, 2471, 2472, 2475, 2479, 2480, 2481, 2483, 2484, 2485, 2489, 2490, 2491, 2492, 2495, 2501, 2505, 2506, 2507, 2508, 2509, 2512, 2513, 2515, 2517, 2518, 2520, 2521, 2522, 2525, 2526, 2528, 2529, 2534, 2535, 2536, 2539, 2540, 2548, 2552, 2553, 2554, 2556, 2557, 2566, 2573, 2577, 2584, 2591, 2592, 2596, 2597, 2601, 2603, 2604, 2608, 2612, 2613, 2621, 2622, 2624, 2626, 2628, 2629, 2630, 2631, 2632, 2633, 2634, 2635, 2636, 2637, 2638, 2639, 2640, 2641, 2646, 2647, 2648, 2649, 2650, 2651, 2655, 2656, 2658, 2660, 2661, 2663, 2664, 2665, 2666, 2667, 2669, 2670, 2671, 2675, 2677, 2678, 2679, 2680, 2681, 2682, 2683, 2685, 2687, 2688, 2689, 2690, 2691, 2692, 2693, 2694, 2695, 2696, 2698, 2699, 2700, 2702, 2703, 2704, 2705, 2706, 2707, 2708, 2709, 2710, 2711, 2712, 2713, 2714, 2716, 2717, 2718, 2719, 2720, 2721, 2722, 2723, 2724, 2725, 2726, 2727, 2728, 2729, 2730, 2731, 2732, 2733, 2738, 2740, 2741, 2742, 2744, 2745, 2747, 2748, 2749, 2754, 2755, 2756, 2758, 2759, 2760, 2761, 2762, 2763, 2764, 2765, 2766, 2767, 2768, 2769, 2770, 2771, 2772, 2773, 2774, 2775, 2776, 2777, 2778, 2779, 2780, 2781, 2782, 2783, 2784, 2785, 2786, 2787, 2788, 2789, 2790, 2791, 2792, 2793, 2794, 2795, 2796, 2797, 2798, 2799, 2800, 2801, 2802, 2803, 2804, 2805, 2806, 2807, 2808, 2809, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2830, 2832, 2833, 2834, 2835, 2837, 2838, 2839, 2841, 2842, 2843, 2844, 2845, 2846, 2847, 2848, 2849, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2857, 2858, 2859, 2860, 2861, 2862, 2863, 2864, 2865, 2866, 2867, 2868, 2869, 2870, 2871, 2872, 2873, 2874, 2875, 2876, 2877, 2878, 2879, 2880, 2881, 2882, 2883, 2884, 2885, 2886, 2887, 2888, 2889, 2890, 2891, 2892, 2893, 2894, 2895, 2896, 2897, 2898, 2899, 2900, 2903, 2904, 2905, 2906, 2907, 2908, 2909, 2910, 2911, 2912, 2913, 2914, 2915, 2916, 2917, 2918, 2919, 2920, 2921, 2924, 2925, 2926, 2928, 2929, 2930, 2931, 2932, 2933, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2948, 2949, 2950, 2951, 2952, 2953, 2954, 2956, 2957, 2958, 2959, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967, 2968, 2969, 2970, 2971, 2972, 2973, 2974, 2975, 2976, 2977, 2978, 2979, 2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2997, 2998, 2999, 3000, 3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008, 3009, 3010, 3011, 3012, 3013, 3014, 3015, 3017, 3018, 3019, 3020, 3021, 3022, 3024, 3025, 3026, 3027, 3028, 3029, 3030, 3031, 3032, 3033, 3034, 3035, 3036, 3037, 3038, 3039, 3040, 3041, 3042, 3043, 3044, 3045, 3046, 3047, 3048, 3049, 3050, 3051, 3052, 3053, 3054, 3055, 3056, 3057, 3058, 3059, 3060, 3061, 3062, 3063, 3064, 3065, 3066, 3067, 3068, 3069, 3070, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086, 3087, 3088, 3089, 3090, 3091, 3092, 3093, 3094, 3095, 3096, 3097, 3098, 34, 62, 69, 309, 329, 381, 382, 413, 419, 459, 535, 879, 897, 1205, 1343, 1346, 1381, 1382, 1383, 1387, 1426, 1427, 1486, 1498, 1506, 1554, 1576, 1584, 1597, 1601, 1634, 1648, 1710, 1765, 1777, 1924, 1925, 1944, 2027, 2071, 2248, 2273, 2286, 2294, 2327, 2338, 2351, 2364, 2404, 2410, 2455, 2460, 2494, 2519, 2527, 2532, 2533, 2562, 2563, 2564, 2567, 2568, 2569, 2570, 2571, 2662, 2701, 2743, 2810, 2831, 2840, 2922, 2955, 3023)
group by 2
ORDER by 1 desc
and mu.username like "anonimous_%"
and mu.mnethostid = 0

--------------- usuario de qa

------
#762241
--select mu.id
select mu.id as user , muuai.*
from bitnami_moodle.mdl_user mu
join bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id 
where muuai.mdl_u_company_id  in (1448, 1, 3, 5, 9, 15, 16, 17, 19, 20, 23, 44, 45, 47, 49, 50, 53, 60, 61, 65, 67, 71, 73, 74, 81, 83, 86, 93, 94, 95, 101, 102, 110, 112, 113, 115, 117, 119, 120, 122, 123, 125, 127, 128, 150, 156, 163, 168, 184, 206, 214, 218, 227, 246, 247, 248, 251, 261, 265, 266, 269, 271, 281, 296, 308, 330, 338, 350, 358, 364, 373, 396, 406, 433, 465, 466, 486, 500, 509, 511, 514, 524, 544, 551, 558, 560, 563, 590, 591, 614, 619, 640, 642, 648, 656, 664, 673, 674, 680, 701, 716, 727, 729, 735, 736, 744, 751, 761, 766, 772, 778, 779, 788, 790, 791, 792, 794, 796, 809, 812, 819, 821, 828, 836, 837, 840, 845, 853, 865, 867, 868, 869, 872, 877, 882, 886, 889, 892, 904, 907, 908, 915, 918, 920, 922, 924, 928, 938, 939, 942, 953, 957, 959, 962, 966, 968, 969, 975, 976, 979, 982, 983, 985, 1009, 1010, 1013, 1016, 1017, 1024, 1030, 1031, 1033, 1034, 1044, 1046, 1050, 1051, 1052, 1060, 1061, 1065, 1077, 1079, 1091, 1100, 1102, 1109, 1110, 1111, 1113, 1114, 1115, 1116, 1118, 1119, 1135, 1137, 1145, 1153, 1154, 1164, 1169, 1170, 1174, 1178, 1185, 1187, 1194, 1211, 1212, 1214, 1215, 1217, 1229, 1235, 1239, 1258, 1271, 1276, 1282, 1284, 1286, 1287, 1289, 1290, 1293, 1294, 1295, 1296, 1301, 1302, 1304, 1305, 1308, 1309, 1310, 1311, 1314, 1315, 1322, 1327, 1337, 1344, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1359, 1360, 1363, 1365, 1368, 1370, 1371, 1373, 1376, 1380, 1385, 1386, 1388, 1389, 1390, 1392, 1393, 1394, 1397, 1398, 1402, 1403, 1407, 1410, 1411, 1417, 1419, 1420, 1423, 1428, 1432, 1433, 1434, 1435, 1439, 1440, 1445, 1450, 1452, 1453, 1454, 1457, 1458, 1469, 1471, 1473, 1476, 1482, 1483, 1490, 1492, 1502, 1504, 1507, 1508, 1517, 1519, 1520, 1524, 1525, 1527, 1528, 1531, 1532, 1533, 1535, 1536, 1539, 1540, 1541, 1542, 1544, 1545, 1547, 1553, 1557, 1558, 1559, 1562, 1567, 1568, 1569, 1571, 1572, 1573, 1574, 1575, 1579, 1582, 1583, 1586, 1587, 1588, 1592, 1593, 1594, 1598, 1599, 1604, 1607, 1613, 1614, 1616, 1619, 1620, 1621, 1624, 1626, 1627, 1628, 1630, 1631, 1632, 1633, 1636, 1638, 1640, 1644, 1646, 1647, 1649, 1653, 1656, 1657, 1658, 1659, 1661, 1662, 1663, 1665, 1666, 1668, 1670, 1671, 1672, 1676, 1678, 1680, 1683, 1686, 1687, 1688, 1689, 1692, 1695, 1696, 1702, 1706, 1708, 1709, 1711, 1714, 1715, 1716, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1728, 1729, 1731, 1735, 1736, 1739, 1741, 1743, 1744, 1746, 1749, 1750, 1751, 1752, 1753, 1754, 1757, 1758, 1759, 1760, 1761, 1766, 1768, 1770, 1772, 1774, 1775, 1779, 1781, 1782, 1783, 1784, 1789, 1790, 1794, 1795, 1797, 1798, 1799, 1803, 1805, 1807, 1816, 1817, 1818, 1822, 1823, 1824, 1825, 1828, 1829, 1831, 1832, 1838, 1839, 1841, 1842, 1843, 1845, 1847, 1848, 1850, 1852, 1856, 1862, 1863, 1864, 1871, 1872, 1875, 1876, 1878, 1880, 1885, 1886, 1888, 1889, 1890, 1891, 1893, 1894, 1896, 1899, 1900, 1901, 1902, 1904, 1905, 1906, 1907, 1913, 1915, 1916, 1917, 1920, 1923, 1928, 1930, 1933, 1935, 1937, 1939, 1943, 1947, 1949, 1950, 1953, 1954, 1959, 1965, 1970, 1972, 1975, 1980, 1986, 1989, 1993, 1997, 1998, 2000, 2002, 2004, 2005, 2009, 2010, 2016, 2018, 2019, 2020, 2024, 2025, 2028, 2029, 2032, 2034, 2035, 2036, 2044, 2045, 2046, 2047, 2048, 2050, 2054, 2055, 2057, 2059, 2061, 2062, 2063, 2065, 2066, 2067, 2068, 2070, 2072, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2082, 2083, 2084, 2085, 2086, 2087, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2102, 2104, 2106, 2107, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2141, 2142, 2143, 2144, 2148, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2162, 2163, 2165, 2166, 2168, 2169, 2170, 2172, 2173, 2174, 2175, 2176, 2178, 2179, 2180, 2181, 2182, 2183, 2185, 2188, 2192, 2196, 2197, 2198, 2200, 2201, 2203, 2204, 2205, 2207, 2209, 2210, 2211, 2212, 2214, 2215, 2217, 2220, 2221, 2225, 2226, 2228, 2230, 2231, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2249, 2250, 2252, 2256, 2259, 2262, 2263, 2264, 2265, 2266, 2269, 2271, 2272, 2274, 2275, 2276, 2279, 2280, 2290, 2291, 2299, 2300, 2301, 2303, 2304, 2308, 2309, 2310, 2311, 2313, 2314, 2315, 2317, 2319, 2324, 2325, 2326, 2329, 2332, 2333, 2339, 2341, 2345, 2346, 2347, 2352, 2353, 2354, 2355, 2356, 2359, 2365, 2368, 2371, 2376, 2377, 2378, 2382, 2387, 2388, 2389, 2393, 2394, 2395, 2397, 2398, 2399, 2401, 2402, 2403, 2407, 2408, 2409, 2416, 2420, 2421, 2423, 2426, 2431, 2434, 2435, 2439, 2440, 2441, 2444, 2447, 2451, 2454, 2456, 2457, 2459, 2469, 2471, 2472, 2475, 2479, 2480, 2481, 2483, 2484, 2485, 2489, 2490, 2491, 2492, 2495, 2501, 2505, 2506, 2507, 2508, 2509, 2512, 2513, 2515, 2517, 2518, 2520, 2521, 2522, 2525, 2526, 2528, 2529, 2534, 2535, 2536, 2539, 2540, 2548, 2552, 2553, 2554, 2556, 2557, 2566, 2573, 2577, 2584, 2591, 2592, 2596, 2597, 2601, 2603, 2604, 2608, 2612, 2613, 2621, 2622, 2624, 2626, 2628, 2629, 2630, 2631, 2632, 2633, 2634, 2635, 2636, 2637, 2638, 2639, 2640, 2641, 2646, 2647, 2648, 2649, 2650, 2651, 2655, 2656, 2658, 2660, 2661, 2663, 2664, 2665, 2666, 2667, 2669, 2670, 2671, 2675, 2677, 2678, 2679, 2680, 2681, 2682, 2683, 2685, 2687, 2688, 2689, 2690, 2691, 2692, 2693, 2694, 2695, 2696, 2698, 2699, 2700, 2702, 2703, 2704, 2705, 2706, 2707, 2708, 2709, 2710, 2711, 2712, 2713, 2714, 2716, 2717, 2718, 2719, 2720, 2721, 2722, 2723, 2724, 2725, 2726, 2727, 2728, 2729, 2730, 2731, 2732, 2733, 2738, 2740, 2741, 2742, 2744, 2745, 2747, 2748, 2749, 2754, 2755, 2756, 2758, 2759, 2760, 2761, 2762, 2763, 2764, 2765, 2766, 2767, 2768, 2769, 2770, 2771, 2772, 2773, 2774, 2775, 2776, 2777, 2778, 2779, 2780, 2781, 2782, 2783, 2784, 2785, 2786, 2787, 2788, 2789, 2790, 2791, 2792, 2793, 2794, 2795, 2796, 2797, 2798, 2799, 2800, 2801, 2802, 2803, 2804, 2805, 2806, 2807, 2808, 2809, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2830, 2832, 2833, 2834, 2835, 2837, 2838, 2839, 2841, 2842, 2843, 2844, 2845, 2846, 2847, 2848, 2849, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2857, 2858, 2859, 2860, 2861, 2862, 2863, 2864, 2865, 2866, 2867, 2868, 2869, 2870, 2871, 2872, 2873, 2874, 2875, 2876, 2877, 2878, 2879, 2880, 2881, 2882, 2883, 2884, 2885, 2886, 2887, 2888, 2889, 2890, 2891, 2892, 2893, 2894, 2895, 2896, 2897, 2898, 2899, 2900, 2903, 2904, 2905, 2906, 2907, 2908, 2909, 2910, 2911, 2912, 2913, 2914, 2915, 2916, 2917, 2918, 2919, 2920, 2921, 2924, 2925, 2926, 2928, 2929, 2930, 2931, 2932, 2933, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2948, 2949, 2950, 2951, 2952, 2953, 2954, 2956, 2957, 2958, 2959, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967, 2968, 2969, 2970, 2971, 2972, 2973, 2974, 2975, 2976, 2977, 2978, 2979, 2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2997, 2998, 2999, 3000, 3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008, 3009, 3010, 3011, 3012, 3013, 3014, 3015, 3017, 3018, 3019, 3020, 3021, 3022, 3024, 3025, 3026, 3027, 3028, 3029, 3030, 3031, 3032, 3033, 3034, 3035, 3036, 3037, 3038, 3039, 3040, 3041, 3042, 3043, 3044, 3045, 3046, 3047, 3048, 3049, 3050, 3051, 3052, 3053, 3054, 3055, 3056, 3057, 3058, 3059, 3060, 3061, 3062, 3063, 3064, 3065, 3066, 3067, 3068, 3069, 3070, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086, 3087, 3088, 3089, 3090, 3091, 3092, 3093, 3094, 3095, 3096, 3097, 3098, 34, 62, 69, 309, 329, 381, 382, 413, 419, 459, 535, 879, 897, 1205, 1343, 1346, 1381, 1382, 1383, 1387, 1426, 1427, 1486, 1498, 1506, 1554, 1576, 1584, 1597, 1601, 1634, 1648, 1710, 1765, 1777, 1924, 1925, 1944, 2027, 2071, 2248, 2273, 2286, 2294, 2327, 2338, 2351, 2364, 2404, 2410, 2455, 2460, 2494, 2519, 2527, 2532, 2533, 2562, 2563, 2564, 2567, 2568, 2569, 2570, 2571, 2662, 2701, 2743, 2810, 2831, 2840, 2922, 2955, 3023)
order by mu.id desc 
and mu.id = 12999


#762241			
---select id 
select 
from bitnami_moodle.mdl_user where id  in ( 
select mu.id
from bitnami_moodle.mdl_user mu
join bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id 
where muuai.mdl_u_company_id  in (1448, 1, 3, 5, 9, 15, 16, 17, 19, 20, 23, 44, 45, 47, 49, 50, 53, 60, 61, 65, 67, 71, 73, 74, 81, 83, 86, 93, 94, 95, 101, 102, 110, 112, 113, 115, 117, 119, 120, 122, 123, 125, 127, 128, 150, 156, 163, 168, 184, 206, 214, 218, 227, 246, 247, 248, 251, 261, 265, 266, 269, 271, 281, 296, 308, 330, 338, 350, 358, 364, 373, 396, 406, 433, 465, 466, 486, 500, 509, 511, 514, 524, 544, 551, 558, 560, 563, 590, 591, 614, 619, 640, 642, 648, 656, 664, 673, 674, 680, 701, 716, 727, 729, 735, 736, 744, 751, 761, 766, 772, 778, 779, 788, 790, 791, 792, 794, 796, 809, 812, 819, 821, 828, 836, 837, 840, 845, 853, 865, 867, 868, 869, 872, 877, 882, 886, 889, 892, 904, 907, 908, 915, 918, 920, 922, 924, 928, 938, 939, 942, 953, 957, 959, 962, 966, 968, 969, 975, 976, 979, 982, 983, 985, 1009, 1010, 1013, 1016, 1017, 1024, 1030, 1031, 1033, 1034, 1044, 1046, 1050, 1051, 1052, 1060, 1061, 1065, 1077, 1079, 1091, 1100, 1102, 1109, 1110, 1111, 1113, 1114, 1115, 1116, 1118, 1119, 1135, 1137, 1145, 1153, 1154, 1164, 1169, 1170, 1174, 1178, 1185, 1187, 1194, 1211, 1212, 1214, 1215, 1217, 1229, 1235, 1239, 1258, 1271, 1276, 1282, 1284, 1286, 1287, 1289, 1290, 1293, 1294, 1295, 1296, 1301, 1302, 1304, 1305, 1308, 1309, 1310, 1311, 1314, 1315, 1322, 1327, 1337, 1344, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1359, 1360, 1363, 1365, 1368, 1370, 1371, 1373, 1376, 1380, 1385, 1386, 1388, 1389, 1390, 1392, 1393, 1394, 1397, 1398, 1402, 1403, 1407, 1410, 1411, 1417, 1419, 1420, 1423, 1428, 1432, 1433, 1434, 1435, 1439, 1440, 1445, 1450, 1452, 1453, 1454, 1457, 1458, 1469, 1471, 1473, 1476, 1482, 1483, 1490, 1492, 1502, 1504, 1507, 1508, 1517, 1519, 1520, 1524, 1525, 1527, 1528, 1531, 1532, 1533, 1535, 1536, 1539, 1540, 1541, 1542, 1544, 1545, 1547, 1553, 1557, 1558, 1559, 1562, 1567, 1568, 1569, 1571, 1572, 1573, 1574, 1575, 1579, 1582, 1583, 1586, 1587, 1588, 1592, 1593, 1594, 1598, 1599, 1604, 1607, 1613, 1614, 1616, 1619, 1620, 1621, 1624, 1626, 1627, 1628, 1630, 1631, 1632, 1633, 1636, 1638, 1640, 1644, 1646, 1647, 1649, 1653, 1656, 1657, 1658, 1659, 1661, 1662, 1663, 1665, 1666, 1668, 1670, 1671, 1672, 1676, 1678, 1680, 1683, 1686, 1687, 1688, 1689, 1692, 1695, 1696, 1702, 1706, 1708, 1709, 1711, 1714, 1715, 1716, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1728, 1729, 1731, 1735, 1736, 1739, 1741, 1743, 1744, 1746, 1749, 1750, 1751, 1752, 1753, 1754, 1757, 1758, 1759, 1760, 1761, 1766, 1768, 1770, 1772, 1774, 1775, 1779, 1781, 1782, 1783, 1784, 1789, 1790, 1794, 1795, 1797, 1798, 1799, 1803, 1805, 1807, 1816, 1817, 1818, 1822, 1823, 1824, 1825, 1828, 1829, 1831, 1832, 1838, 1839, 1841, 1842, 1843, 1845, 1847, 1848, 1850, 1852, 1856, 1862, 1863, 1864, 1871, 1872, 1875, 1876, 1878, 1880, 1885, 1886, 1888, 1889, 1890, 1891, 1893, 1894, 1896, 1899, 1900, 1901, 1902, 1904, 1905, 1906, 1907, 1913, 1915, 1916, 1917, 1920, 1923, 1928, 1930, 1933, 1935, 1937, 1939, 1943, 1947, 1949, 1950, 1953, 1954, 1959, 1965, 1970, 1972, 1975, 1980, 1986, 1989, 1993, 1997, 1998, 2000, 2002, 2004, 2005, 2009, 2010, 2016, 2018, 2019, 2020, 2024, 2025, 2028, 2029, 2032, 2034, 2035, 2036, 2044, 2045, 2046, 2047, 2048, 2050, 2054, 2055, 2057, 2059, 2061, 2062, 2063, 2065, 2066, 2067, 2068, 2070, 2072, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2082, 2083, 2084, 2085, 2086, 2087, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2102, 2104, 2106, 2107, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2141, 2142, 2143, 2144, 2148, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2162, 2163, 2165, 2166, 2168, 2169, 2170, 2172, 2173, 2174, 2175, 2176, 2178, 2179, 2180, 2181, 2182, 2183, 2185, 2188, 2192, 2196, 2197, 2198, 2200, 2201, 2203, 2204, 2205, 2207, 2209, 2210, 2211, 2212, 2214, 2215, 2217, 2220, 2221, 2225, 2226, 2228, 2230, 2231, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2249, 2250, 2252, 2256, 2259, 2262, 2263, 2264, 2265, 2266, 2269, 2271, 2272, 2274, 2275, 2276, 2279, 2280, 2290, 2291, 2299, 2300, 2301, 2303, 2304, 2308, 2309, 2310, 2311, 2313, 2314, 2315, 2317, 2319, 2324, 2325, 2326, 2329, 2332, 2333, 2339, 2341, 2345, 2346, 2347, 2352, 2353, 2354, 2355, 2356, 2359, 2365, 2368, 2371, 2376, 2377, 2378, 2382, 2387, 2388, 2389, 2393, 2394, 2395, 2397, 2398, 2399, 2401, 2402, 2403, 2407, 2408, 2409, 2416, 2420, 2421, 2423, 2426, 2431, 2434, 2435, 2439, 2440, 2441, 2444, 2447, 2451, 2454, 2456, 2457, 2459, 2469, 2471, 2472, 2475, 2479, 2480, 2481, 2483, 2484, 2485, 2489, 2490, 2491, 2492, 2495, 2501, 2505, 2506, 2507, 2508, 2509, 2512, 2513, 2515, 2517, 2518, 2520, 2521, 2522, 2525, 2526, 2528, 2529, 2534, 2535, 2536, 2539, 2540, 2548, 2552, 2553, 2554, 2556, 2557, 2566, 2573, 2577, 2584, 2591, 2592, 2596, 2597, 2601, 2603, 2604, 2608, 2612, 2613, 2621, 2622, 2624, 2626, 2628, 2629, 2630, 2631, 2632, 2633, 2634, 2635, 2636, 2637, 2638, 2639, 2640, 2641, 2646, 2647, 2648, 2649, 2650, 2651, 2655, 2656, 2658, 2660, 2661, 2663, 2664, 2665, 2666, 2667, 2669, 2670, 2671, 2675, 2677, 2678, 2679, 2680, 2681, 2682, 2683, 2685, 2687, 2688, 2689, 2690, 2691, 2692, 2693, 2694, 2695, 2696, 2698, 2699, 2700, 2702, 2703, 2704, 2705, 2706, 2707, 2708, 2709, 2710, 2711, 2712, 2713, 2714, 2716, 2717, 2718, 2719, 2720, 2721, 2722, 2723, 2724, 2725, 2726, 2727, 2728, 2729, 2730, 2731, 2732, 2733, 2738, 2740, 2741, 2742, 2744, 2745, 2747, 2748, 2749, 2754, 2755, 2756, 2758, 2759, 2760, 2761, 2762, 2763, 2764, 2765, 2766, 2767, 2768, 2769, 2770, 2771, 2772, 2773, 2774, 2775, 2776, 2777, 2778, 2779, 2780, 2781, 2782, 2783, 2784, 2785, 2786, 2787, 2788, 2789, 2790, 2791, 2792, 2793, 2794, 2795, 2796, 2797, 2798, 2799, 2800, 2801, 2802, 2803, 2804, 2805, 2806, 2807, 2808, 2809, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2830, 2832, 2833, 2834, 2835, 2837, 2838, 2839, 2841, 2842, 2843, 2844, 2845, 2846, 2847, 2848, 2849, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2857, 2858, 2859, 2860, 2861, 2862, 2863, 2864, 2865, 2866, 2867, 2868, 2869, 2870, 2871, 2872, 2873, 2874, 2875, 2876, 2877, 2878, 2879, 2880, 2881, 2882, 2883, 2884, 2885, 2886, 2887, 2888, 2889, 2890, 2891, 2892, 2893, 2894, 2895, 2896, 2897, 2898, 2899, 2900, 2903, 2904, 2905, 2906, 2907, 2908, 2909, 2910, 2911, 2912, 2913, 2914, 2915, 2916, 2917, 2918, 2919, 2920, 2921, 2924, 2925, 2926, 2928, 2929, 2930, 2931, 2932, 2933, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2948, 2949, 2950, 2951, 2952, 2953, 2954, 2956, 2957, 2958, 2959, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967, 2968, 2969, 2970, 2971, 2972, 2973, 2974, 2975, 2976, 2977, 2978, 2979, 2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2997, 2998, 2999, 3000, 3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008, 3009, 3010, 3011, 3012, 3013, 3014, 3015, 3017, 3018, 3019, 3020, 3021, 3022, 3024, 3025, 3026, 3027, 3028, 3029, 3030, 3031, 3032, 3033, 3034, 3035, 3036, 3037, 3038, 3039, 3040, 3041, 3042, 3043, 3044, 3045, 3046, 3047, 3048, 3049, 3050, 3051, 3052, 3053, 3054, 3055, 3056, 3057, 3058, 3059, 3060, 3061, 3062, 3063, 3064, 3065, 3066, 3067, 3068, 3069, 3070, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086, 3087, 3088, 3089, 3090, 3091, 3092, 3093, 3094, 3095, 3096, 3097, 3098, 34, 62, 69, 309, 329, 381, 382, 413, 419, 459, 535, 879, 897, 1205, 1343, 1346, 1381, 1382, 1383, 1387, 1426, 1427, 1486, 1498, 1506, 1554, 1576, 1584, 1597, 1601, 1634, 1648, 1710, 1765, 1777, 1924, 1925, 1944, 2027, 2071, 2248, 2273, 2286, 2294, 2327, 2338, 2351, 2364, 2404, 2410, 2455, 2460, 2494, 2519, 2527, 2532, 2533, 2562, 2563, 2564, 2567, 2568, 2569, 2570, 2571, 2662, 2701, 2743, 2810, 2831, 2840, 2922, 2955, 3023)
)
and username like "anonimous_%"
			
#762241
select count(mdl_user_id) from bitnami_moodle.mdl_u_user_additional_info where mdl_user_id  in ( 
select mu.id
from bitnami_moodle.mdl_user mu
join bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id 
where muuai.mdl_u_company_id  in (1448, 1, 3, 5, 9, 15, 16, 17, 19, 20, 23, 44, 45, 47, 49, 50, 53, 60, 61, 65, 67, 71, 73, 74, 81, 83, 86, 93, 94, 95, 101, 102, 110, 112, 113, 115, 117, 119, 120, 122, 123, 125, 127, 128, 150, 156, 163, 168, 184, 206, 214, 218, 227, 246, 247, 248, 251, 261, 265, 266, 269, 271, 281, 296, 308, 330, 338, 350, 358, 364, 373, 396, 406, 433, 465, 466, 486, 500, 509, 511, 514, 524, 544, 551, 558, 560, 563, 590, 591, 614, 619, 640, 642, 648, 656, 664, 673, 674, 680, 701, 716, 727, 729, 735, 736, 744, 751, 761, 766, 772, 778, 779, 788, 790, 791, 792, 794, 796, 809, 812, 819, 821, 828, 836, 837, 840, 845, 853, 865, 867, 868, 869, 872, 877, 882, 886, 889, 892, 904, 907, 908, 915, 918, 920, 922, 924, 928, 938, 939, 942, 953, 957, 959, 962, 966, 968, 969, 975, 976, 979, 982, 983, 985, 1009, 1010, 1013, 1016, 1017, 1024, 1030, 1031, 1033, 1034, 1044, 1046, 1050, 1051, 1052, 1060, 1061, 1065, 1077, 1079, 1091, 1100, 1102, 1109, 1110, 1111, 1113, 1114, 1115, 1116, 1118, 1119, 1135, 1137, 1145, 1153, 1154, 1164, 1169, 1170, 1174, 1178, 1185, 1187, 1194, 1211, 1212, 1214, 1215, 1217, 1229, 1235, 1239, 1258, 1271, 1276, 1282, 1284, 1286, 1287, 1289, 1290, 1293, 1294, 1295, 1296, 1301, 1302, 1304, 1305, 1308, 1309, 1310, 1311, 1314, 1315, 1322, 1327, 1337, 1344, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1359, 1360, 1363, 1365, 1368, 1370, 1371, 1373, 1376, 1380, 1385, 1386, 1388, 1389, 1390, 1392, 1393, 1394, 1397, 1398, 1402, 1403, 1407, 1410, 1411, 1417, 1419, 1420, 1423, 1428, 1432, 1433, 1434, 1435, 1439, 1440, 1445, 1450, 1452, 1453, 1454, 1457, 1458, 1469, 1471, 1473, 1476, 1482, 1483, 1490, 1492, 1502, 1504, 1507, 1508, 1517, 1519, 1520, 1524, 1525, 1527, 1528, 1531, 1532, 1533, 1535, 1536, 1539, 1540, 1541, 1542, 1544, 1545, 1547, 1553, 1557, 1558, 1559, 1562, 1567, 1568, 1569, 1571, 1572, 1573, 1574, 1575, 1579, 1582, 1583, 1586, 1587, 1588, 1592, 1593, 1594, 1598, 1599, 1604, 1607, 1613, 1614, 1616, 1619, 1620, 1621, 1624, 1626, 1627, 1628, 1630, 1631, 1632, 1633, 1636, 1638, 1640, 1644, 1646, 1647, 1649, 1653, 1656, 1657, 1658, 1659, 1661, 1662, 1663, 1665, 1666, 1668, 1670, 1671, 1672, 1676, 1678, 1680, 1683, 1686, 1687, 1688, 1689, 1692, 1695, 1696, 1702, 1706, 1708, 1709, 1711, 1714, 1715, 1716, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1728, 1729, 1731, 1735, 1736, 1739, 1741, 1743, 1744, 1746, 1749, 1750, 1751, 1752, 1753, 1754, 1757, 1758, 1759, 1760, 1761, 1766, 1768, 1770, 1772, 1774, 1775, 1779, 1781, 1782, 1783, 1784, 1789, 1790, 1794, 1795, 1797, 1798, 1799, 1803, 1805, 1807, 1816, 1817, 1818, 1822, 1823, 1824, 1825, 1828, 1829, 1831, 1832, 1838, 1839, 1841, 1842, 1843, 1845, 1847, 1848, 1850, 1852, 1856, 1862, 1863, 1864, 1871, 1872, 1875, 1876, 1878, 1880, 1885, 1886, 1888, 1889, 1890, 1891, 1893, 1894, 1896, 1899, 1900, 1901, 1902, 1904, 1905, 1906, 1907, 1913, 1915, 1916, 1917, 1920, 1923, 1928, 1930, 1933, 1935, 1937, 1939, 1943, 1947, 1949, 1950, 1953, 1954, 1959, 1965, 1970, 1972, 1975, 1980, 1986, 1989, 1993, 1997, 1998, 2000, 2002, 2004, 2005, 2009, 2010, 2016, 2018, 2019, 2020, 2024, 2025, 2028, 2029, 2032, 2034, 2035, 2036, 2044, 2045, 2046, 2047, 2048, 2050, 2054, 2055, 2057, 2059, 2061, 2062, 2063, 2065, 2066, 2067, 2068, 2070, 2072, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2082, 2083, 2084, 2085, 2086, 2087, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2102, 2104, 2106, 2107, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2141, 2142, 2143, 2144, 2148, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2162, 2163, 2165, 2166, 2168, 2169, 2170, 2172, 2173, 2174, 2175, 2176, 2178, 2179, 2180, 2181, 2182, 2183, 2185, 2188, 2192, 2196, 2197, 2198, 2200, 2201, 2203, 2204, 2205, 2207, 2209, 2210, 2211, 2212, 2214, 2215, 2217, 2220, 2221, 2225, 2226, 2228, 2230, 2231, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2249, 2250, 2252, 2256, 2259, 2262, 2263, 2264, 2265, 2266, 2269, 2271, 2272, 2274, 2275, 2276, 2279, 2280, 2290, 2291, 2299, 2300, 2301, 2303, 2304, 2308, 2309, 2310, 2311, 2313, 2314, 2315, 2317, 2319, 2324, 2325, 2326, 2329, 2332, 2333, 2339, 2341, 2345, 2346, 2347, 2352, 2353, 2354, 2355, 2356, 2359, 2365, 2368, 2371, 2376, 2377, 2378, 2382, 2387, 2388, 2389, 2393, 2394, 2395, 2397, 2398, 2399, 2401, 2402, 2403, 2407, 2408, 2409, 2416, 2420, 2421, 2423, 2426, 2431, 2434, 2435, 2439, 2440, 2441, 2444, 2447, 2451, 2454, 2456, 2457, 2459, 2469, 2471, 2472, 2475, 2479, 2480, 2481, 2483, 2484, 2485, 2489, 2490, 2491, 2492, 2495, 2501, 2505, 2506, 2507, 2508, 2509, 2512, 2513, 2515, 2517, 2518, 2520, 2521, 2522, 2525, 2526, 2528, 2529, 2534, 2535, 2536, 2539, 2540, 2548, 2552, 2553, 2554, 2556, 2557, 2566, 2573, 2577, 2584, 2591, 2592, 2596, 2597, 2601, 2603, 2604, 2608, 2612, 2613, 2621, 2622, 2624, 2626, 2628, 2629, 2630, 2631, 2632, 2633, 2634, 2635, 2636, 2637, 2638, 2639, 2640, 2641, 2646, 2647, 2648, 2649, 2650, 2651, 2655, 2656, 2658, 2660, 2661, 2663, 2664, 2665, 2666, 2667, 2669, 2670, 2671, 2675, 2677, 2678, 2679, 2680, 2681, 2682, 2683, 2685, 2687, 2688, 2689, 2690, 2691, 2692, 2693, 2694, 2695, 2696, 2698, 2699, 2700, 2702, 2703, 2704, 2705, 2706, 2707, 2708, 2709, 2710, 2711, 2712, 2713, 2714, 2716, 2717, 2718, 2719, 2720, 2721, 2722, 2723, 2724, 2725, 2726, 2727, 2728, 2729, 2730, 2731, 2732, 2733, 2738, 2740, 2741, 2742, 2744, 2745, 2747, 2748, 2749, 2754, 2755, 2756, 2758, 2759, 2760, 2761, 2762, 2763, 2764, 2765, 2766, 2767, 2768, 2769, 2770, 2771, 2772, 2773, 2774, 2775, 2776, 2777, 2778, 2779, 2780, 2781, 2782, 2783, 2784, 2785, 2786, 2787, 2788, 2789, 2790, 2791, 2792, 2793, 2794, 2795, 2796, 2797, 2798, 2799, 2800, 2801, 2802, 2803, 2804, 2805, 2806, 2807, 2808, 2809, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2830, 2832, 2833, 2834, 2835, 2837, 2838, 2839, 2841, 2842, 2843, 2844, 2845, 2846, 2847, 2848, 2849, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2857, 2858, 2859, 2860, 2861, 2862, 2863, 2864, 2865, 2866, 2867, 2868, 2869, 2870, 2871, 2872, 2873, 2874, 2875, 2876, 2877, 2878, 2879, 2880, 2881, 2882, 2883, 2884, 2885, 2886, 2887, 2888, 2889, 2890, 2891, 2892, 2893, 2894, 2895, 2896, 2897, 2898, 2899, 2900, 2903, 2904, 2905, 2906, 2907, 2908, 2909, 2910, 2911, 2912, 2913, 2914, 2915, 2916, 2917, 2918, 2919, 2920, 2921, 2924, 2925, 2926, 2928, 2929, 2930, 2931, 2932, 2933, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2948, 2949, 2950, 2951, 2952, 2953, 2954, 2956, 2957, 2958, 2959, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967, 2968, 2969, 2970, 2971, 2972, 2973, 2974, 2975, 2976, 2977, 2978, 2979, 2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2997, 2998, 2999, 3000, 3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008, 3009, 3010, 3011, 3012, 3013, 3014, 3015, 3017, 3018, 3019, 3020, 3021, 3022, 3024, 3025, 3026, 3027, 3028, 3029, 3030, 3031, 3032, 3033, 3034, 3035, 3036, 3037, 3038, 3039, 3040, 3041, 3042, 3043, 3044, 3045, 3046, 3047, 3048, 3049, 3050, 3051, 3052, 3053, 3054, 3055, 3056, 3057, 3058, 3059, 3060, 3061, 3062, 3063, 3064, 3065, 3066, 3067, 3068, 3069, 3070, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086, 3087, 3088, 3089, 3090, 3091, 3092, 3093, 3094, 3095, 3096, 3097, 3098, 34, 62, 69, 309, 329, 381, 382, 413, 419, 459, 535, 879, 897, 1205, 1343, 1346, 1381, 1382, 1383, 1387, 1426, 1427, 1486, 1498, 1506, 1554, 1576, 1584, 1597, 1601, 1634, 1648, 1710, 1765, 1777, 1924, 1925, 1944, 2027, 2071, 2248, 2273, 2286, 2294, 2327, 2338, 2351, 2364, 2404, 2410, 2455, 2460, 2494, 2519, 2527, 2532, 2533, 2562, 2563, 2564, 2567, 2568, 2569, 2570, 2571, 2662, 2701, 2743, 2810, 2831, 2840, 2922, 2955, 3023)
)
            
#759336
select * from adminhr.ubits_user where mdl_user_id  in ( 
select mu.id
from bitnami_moodle.mdl_user mu
join bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id 
where muuai.mdl_u_company_id  in (1448, 1, 3, 5, 9, 15, 16, 17, 19, 20, 23, 44, 45, 47, 49, 50, 53, 60, 61, 65, 67, 71, 73, 74, 81, 83, 86, 93, 94, 95, 101, 102, 110, 112, 113, 115, 117, 119, 120, 122, 123, 125, 127, 128, 150, 156, 163, 168, 184, 206, 214, 218, 227, 246, 247, 248, 251, 261, 265, 266, 269, 271, 281, 296, 308, 330, 338, 350, 358, 364, 373, 396, 406, 433, 465, 466, 486, 500, 509, 511, 514, 524, 544, 551, 558, 560, 563, 590, 591, 614, 619, 640, 642, 648, 656, 664, 673, 674, 680, 701, 716, 727, 729, 735, 736, 744, 751, 761, 766, 772, 778, 779, 788, 790, 791, 792, 794, 796, 809, 812, 819, 821, 828, 836, 837, 840, 845, 853, 865, 867, 868, 869, 872, 877, 882, 886, 889, 892, 904, 907, 908, 915, 918, 920, 922, 924, 928, 938, 939, 942, 953, 957, 959, 962, 966, 968, 969, 975, 976, 979, 982, 983, 985, 1009, 1010, 1013, 1016, 1017, 1024, 1030, 1031, 1033, 1034, 1044, 1046, 1050, 1051, 1052, 1060, 1061, 1065, 1077, 1079, 1091, 1100, 1102, 1109, 1110, 1111, 1113, 1114, 1115, 1116, 1118, 1119, 1135, 1137, 1145, 1153, 1154, 1164, 1169, 1170, 1174, 1178, 1185, 1187, 1194, 1211, 1212, 1214, 1215, 1217, 1229, 1235, 1239, 1258, 1271, 1276, 1282, 1284, 1286, 1287, 1289, 1290, 1293, 1294, 1295, 1296, 1301, 1302, 1304, 1305, 1308, 1309, 1310, 1311, 1314, 1315, 1322, 1327, 1337, 1344, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1359, 1360, 1363, 1365, 1368, 1370, 1371, 1373, 1376, 1380, 1385, 1386, 1388, 1389, 1390, 1392, 1393, 1394, 1397, 1398, 1402, 1403, 1407, 1410, 1411, 1417, 1419, 1420, 1423, 1428, 1432, 1433, 1434, 1435, 1439, 1440, 1445, 1450, 1452, 1453, 1454, 1457, 1458, 1469, 1471, 1473, 1476, 1482, 1483, 1490, 1492, 1502, 1504, 1507, 1508, 1517, 1519, 1520, 1524, 1525, 1527, 1528, 1531, 1532, 1533, 1535, 1536, 1539, 1540, 1541, 1542, 1544, 1545, 1547, 1553, 1557, 1558, 1559, 1562, 1567, 1568, 1569, 1571, 1572, 1573, 1574, 1575, 1579, 1582, 1583, 1586, 1587, 1588, 1592, 1593, 1594, 1598, 1599, 1604, 1607, 1613, 1614, 1616, 1619, 1620, 1621, 1624, 1626, 1627, 1628, 1630, 1631, 1632, 1633, 1636, 1638, 1640, 1644, 1646, 1647, 1649, 1653, 1656, 1657, 1658, 1659, 1661, 1662, 1663, 1665, 1666, 1668, 1670, 1671, 1672, 1676, 1678, 1680, 1683, 1686, 1687, 1688, 1689, 1692, 1695, 1696, 1702, 1706, 1708, 1709, 1711, 1714, 1715, 1716, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1728, 1729, 1731, 1735, 1736, 1739, 1741, 1743, 1744, 1746, 1749, 1750, 1751, 1752, 1753, 1754, 1757, 1758, 1759, 1760, 1761, 1766, 1768, 1770, 1772, 1774, 1775, 1779, 1781, 1782, 1783, 1784, 1789, 1790, 1794, 1795, 1797, 1798, 1799, 1803, 1805, 1807, 1816, 1817, 1818, 1822, 1823, 1824, 1825, 1828, 1829, 1831, 1832, 1838, 1839, 1841, 1842, 1843, 1845, 1847, 1848, 1850, 1852, 1856, 1862, 1863, 1864, 1871, 1872, 1875, 1876, 1878, 1880, 1885, 1886, 1888, 1889, 1890, 1891, 1893, 1894, 1896, 1899, 1900, 1901, 1902, 1904, 1905, 1906, 1907, 1913, 1915, 1916, 1917, 1920, 1923, 1928, 1930, 1933, 1935, 1937, 1939, 1943, 1947, 1949, 1950, 1953, 1954, 1959, 1965, 1970, 1972, 1975, 1980, 1986, 1989, 1993, 1997, 1998, 2000, 2002, 2004, 2005, 2009, 2010, 2016, 2018, 2019, 2020, 2024, 2025, 2028, 2029, 2032, 2034, 2035, 2036, 2044, 2045, 2046, 2047, 2048, 2050, 2054, 2055, 2057, 2059, 2061, 2062, 2063, 2065, 2066, 2067, 2068, 2070, 2072, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2082, 2083, 2084, 2085, 2086, 2087, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2102, 2104, 2106, 2107, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2141, 2142, 2143, 2144, 2148, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2162, 2163, 2165, 2166, 2168, 2169, 2170, 2172, 2173, 2174, 2175, 2176, 2178, 2179, 2180, 2181, 2182, 2183, 2185, 2188, 2192, 2196, 2197, 2198, 2200, 2201, 2203, 2204, 2205, 2207, 2209, 2210, 2211, 2212, 2214, 2215, 2217, 2220, 2221, 2225, 2226, 2228, 2230, 2231, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2249, 2250, 2252, 2256, 2259, 2262, 2263, 2264, 2265, 2266, 2269, 2271, 2272, 2274, 2275, 2276, 2279, 2280, 2290, 2291, 2299, 2300, 2301, 2303, 2304, 2308, 2309, 2310, 2311, 2313, 2314, 2315, 2317, 2319, 2324, 2325, 2326, 2329, 2332, 2333, 2339, 2341, 2345, 2346, 2347, 2352, 2353, 2354, 2355, 2356, 2359, 2365, 2368, 2371, 2376, 2377, 2378, 2382, 2387, 2388, 2389, 2393, 2394, 2395, 2397, 2398, 2399, 2401, 2402, 2403, 2407, 2408, 2409, 2416, 2420, 2421, 2423, 2426, 2431, 2434, 2435, 2439, 2440, 2441, 2444, 2447, 2451, 2454, 2456, 2457, 2459, 2469, 2471, 2472, 2475, 2479, 2480, 2481, 2483, 2484, 2485, 2489, 2490, 2491, 2492, 2495, 2501, 2505, 2506, 2507, 2508, 2509, 2512, 2513, 2515, 2517, 2518, 2520, 2521, 2522, 2525, 2526, 2528, 2529, 2534, 2535, 2536, 2539, 2540, 2548, 2552, 2553, 2554, 2556, 2557, 2566, 2573, 2577, 2584, 2591, 2592, 2596, 2597, 2601, 2603, 2604, 2608, 2612, 2613, 2621, 2622, 2624, 2626, 2628, 2629, 2630, 2631, 2632, 2633, 2634, 2635, 2636, 2637, 2638, 2639, 2640, 2641, 2646, 2647, 2648, 2649, 2650, 2651, 2655, 2656, 2658, 2660, 2661, 2663, 2664, 2665, 2666, 2667, 2669, 2670, 2671, 2675, 2677, 2678, 2679, 2680, 2681, 2682, 2683, 2685, 2687, 2688, 2689, 2690, 2691, 2692, 2693, 2694, 2695, 2696, 2698, 2699, 2700, 2702, 2703, 2704, 2705, 2706, 2707, 2708, 2709, 2710, 2711, 2712, 2713, 2714, 2716, 2717, 2718, 2719, 2720, 2721, 2722, 2723, 2724, 2725, 2726, 2727, 2728, 2729, 2730, 2731, 2732, 2733, 2738, 2740, 2741, 2742, 2744, 2745, 2747, 2748, 2749, 2754, 2755, 2756, 2758, 2759, 2760, 2761, 2762, 2763, 2764, 2765, 2766, 2767, 2768, 2769, 2770, 2771, 2772, 2773, 2774, 2775, 2776, 2777, 2778, 2779, 2780, 2781, 2782, 2783, 2784, 2785, 2786, 2787, 2788, 2789, 2790, 2791, 2792, 2793, 2794, 2795, 2796, 2797, 2798, 2799, 2800, 2801, 2802, 2803, 2804, 2805, 2806, 2807, 2808, 2809, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2830, 2832, 2833, 2834, 2835, 2837, 2838, 2839, 2841, 2842, 2843, 2844, 2845, 2846, 2847, 2848, 2849, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2857, 2858, 2859, 2860, 2861, 2862, 2863, 2864, 2865, 2866, 2867, 2868, 2869, 2870, 2871, 2872, 2873, 2874, 2875, 2876, 2877, 2878, 2879, 2880, 2881, 2882, 2883, 2884, 2885, 2886, 2887, 2888, 2889, 2890, 2891, 2892, 2893, 2894, 2895, 2896, 2897, 2898, 2899, 2900, 2903, 2904, 2905, 2906, 2907, 2908, 2909, 2910, 2911, 2912, 2913, 2914, 2915, 2916, 2917, 2918, 2919, 2920, 2921, 2924, 2925, 2926, 2928, 2929, 2930, 2931, 2932, 2933, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2948, 2949, 2950, 2951, 2952, 2953, 2954, 2956, 2957, 2958, 2959, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967, 2968, 2969, 2970, 2971, 2972, 2973, 2974, 2975, 2976, 2977, 2978, 2979, 2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2997, 2998, 2999, 3000, 3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008, 3009, 3010, 3011, 3012, 3013, 3014, 3015, 3017, 3018, 3019, 3020, 3021, 3022, 3024, 3025, 3026, 3027, 3028, 3029, 3030, 3031, 3032, 3033, 3034, 3035, 3036, 3037, 3038, 3039, 3040, 3041, 3042, 3043, 3044, 3045, 3046, 3047, 3048, 3049, 3050, 3051, 3052, 3053, 3054, 3055, 3056, 3057, 3058, 3059, 3060, 3061, 3062, 3063, 3064, 3065, 3066, 3067, 3068, 3069, 3070, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086, 3087, 3088, 3089, 3090, 3091, 3092, 3093, 3094, 3095, 3096, 3097, 3098, 34, 62, 69, 309, 329, 381, 382, 413, 419, 459, 535, 879, 897, 1205, 1343, 1346, 1381, 1382, 1383, 1387, 1426, 1427, 1486, 1498, 1506, 1554, 1576, 1584, 1597, 1601, 1634, 1648, 1710, 1765, 1777, 1924, 1925, 1944, 2027, 2071, 2248, 2273, 2286, 2294, 2327, 2338, 2351, 2364, 2404, 2410, 2455, 2460, 2494, 2519, 2527, 2532, 2533, 2562, 2563, 2564, 2567, 2568, 2569, 2570, 2571, 2662, 2701, 2743, 2810, 2831, 2840, 2922, 2955, 3023)
)
AND mdl_user_id = 222230
LIKE '%anonimous%'


SELECT muuai.mdl_user_id , COUNT(muuai.mdl_user_id) AS cantidad_registros
FROM bitnami_moodle.mdl_user mu
LEFT JOIN bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id
GROUP BY muuai.mdl_user_id 
HAVING COUNT(muuai.mdl_user_id) > 1
ORDER BY cantidad_registros DESC;

select * 
FROM 
	adminhr.ubits_user uu 
WHERE 
	id = 12999







#16489
select count(id) from goals.user where id   in ( 
select mu.id
from bitnami_moodle.mdl_user mu
join bitnami_moodle.mdl_u_user_additional_info muuai on mu.id = muuai.mdl_user_id 
where muuai.mdl_u_company_id  in (1448, 1, 3, 5, 9, 15, 16, 17, 19, 20, 23, 44, 45, 47, 49, 50, 53, 60, 61, 65, 67, 71, 73, 74, 81, 83, 86, 93, 94, 95, 101, 102, 110, 112, 113, 115, 117, 119, 120, 122, 123, 125, 127, 128, 150, 156, 163, 168, 184, 206, 214, 218, 227, 246, 247, 248, 251, 261, 265, 266, 269, 271, 281, 296, 308, 330, 338, 350, 358, 364, 373, 396, 406, 433, 465, 466, 486, 500, 509, 511, 514, 524, 544, 551, 558, 560, 563, 590, 591, 614, 619, 640, 642, 648, 656, 664, 673, 674, 680, 701, 716, 727, 729, 735, 736, 744, 751, 761, 766, 772, 778, 779, 788, 790, 791, 792, 794, 796, 809, 812, 819, 821, 828, 836, 837, 840, 845, 853, 865, 867, 868, 869, 872, 877, 882, 886, 889, 892, 904, 907, 908, 915, 918, 920, 922, 924, 928, 938, 939, 942, 953, 957, 959, 962, 966, 968, 969, 975, 976, 979, 982, 983, 985, 1009, 1010, 1013, 1016, 1017, 1024, 1030, 1031, 1033, 1034, 1044, 1046, 1050, 1051, 1052, 1060, 1061, 1065, 1077, 1079, 1091, 1100, 1102, 1109, 1110, 1111, 1113, 1114, 1115, 1116, 1118, 1119, 1135, 1137, 1145, 1153, 1154, 1164, 1169, 1170, 1174, 1178, 1185, 1187, 1194, 1211, 1212, 1214, 1215, 1217, 1229, 1235, 1239, 1258, 1271, 1276, 1282, 1284, 1286, 1287, 1289, 1290, 1293, 1294, 1295, 1296, 1301, 1302, 1304, 1305, 1308, 1309, 1310, 1311, 1314, 1315, 1322, 1327, 1337, 1344, 1349, 1350, 1351, 1352, 1353, 1354, 1355, 1356, 1357, 1359, 1360, 1363, 1365, 1368, 1370, 1371, 1373, 1376, 1380, 1385, 1386, 1388, 1389, 1390, 1392, 1393, 1394, 1397, 1398, 1402, 1403, 1407, 1410, 1411, 1417, 1419, 1420, 1423, 1428, 1432, 1433, 1434, 1435, 1439, 1440, 1445, 1450, 1452, 1453, 1454, 1457, 1458, 1469, 1471, 1473, 1476, 1482, 1483, 1490, 1492, 1502, 1504, 1507, 1508, 1517, 1519, 1520, 1524, 1525, 1527, 1528, 1531, 1532, 1533, 1535, 1536, 1539, 1540, 1541, 1542, 1544, 1545, 1547, 1553, 1557, 1558, 1559, 1562, 1567, 1568, 1569, 1571, 1572, 1573, 1574, 1575, 1579, 1582, 1583, 1586, 1587, 1588, 1592, 1593, 1594, 1598, 1599, 1604, 1607, 1613, 1614, 1616, 1619, 1620, 1621, 1624, 1626, 1627, 1628, 1630, 1631, 1632, 1633, 1636, 1638, 1640, 1644, 1646, 1647, 1649, 1653, 1656, 1657, 1658, 1659, 1661, 1662, 1663, 1665, 1666, 1668, 1670, 1671, 1672, 1676, 1678, 1680, 1683, 1686, 1687, 1688, 1689, 1692, 1695, 1696, 1702, 1706, 1708, 1709, 1711, 1714, 1715, 1716, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1728, 1729, 1731, 1735, 1736, 1739, 1741, 1743, 1744, 1746, 1749, 1750, 1751, 1752, 1753, 1754, 1757, 1758, 1759, 1760, 1761, 1766, 1768, 1770, 1772, 1774, 1775, 1779, 1781, 1782, 1783, 1784, 1789, 1790, 1794, 1795, 1797, 1798, 1799, 1803, 1805, 1807, 1816, 1817, 1818, 1822, 1823, 1824, 1825, 1828, 1829, 1831, 1832, 1838, 1839, 1841, 1842, 1843, 1845, 1847, 1848, 1850, 1852, 1856, 1862, 1863, 1864, 1871, 1872, 1875, 1876, 1878, 1880, 1885, 1886, 1888, 1889, 1890, 1891, 1893, 1894, 1896, 1899, 1900, 1901, 1902, 1904, 1905, 1906, 1907, 1913, 1915, 1916, 1917, 1920, 1923, 1928, 1930, 1933, 1935, 1937, 1939, 1943, 1947, 1949, 1950, 1953, 1954, 1959, 1965, 1970, 1972, 1975, 1980, 1986, 1989, 1993, 1997, 1998, 2000, 2002, 2004, 2005, 2009, 2010, 2016, 2018, 2019, 2020, 2024, 2025, 2028, 2029, 2032, 2034, 2035, 2036, 2044, 2045, 2046, 2047, 2048, 2050, 2054, 2055, 2057, 2059, 2061, 2062, 2063, 2065, 2066, 2067, 2068, 2070, 2072, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2082, 2083, 2084, 2085, 2086, 2087, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2102, 2104, 2106, 2107, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2141, 2142, 2143, 2144, 2148, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2162, 2163, 2165, 2166, 2168, 2169, 2170, 2172, 2173, 2174, 2175, 2176, 2178, 2179, 2180, 2181, 2182, 2183, 2185, 2188, 2192, 2196, 2197, 2198, 2200, 2201, 2203, 2204, 2205, 2207, 2209, 2210, 2211, 2212, 2214, 2215, 2217, 2220, 2221, 2225, 2226, 2228, 2230, 2231, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2249, 2250, 2252, 2256, 2259, 2262, 2263, 2264, 2265, 2266, 2269, 2271, 2272, 2274, 2275, 2276, 2279, 2280, 2290, 2291, 2299, 2300, 2301, 2303, 2304, 2308, 2309, 2310, 2311, 2313, 2314, 2315, 2317, 2319, 2324, 2325, 2326, 2329, 2332, 2333, 2339, 2341, 2345, 2346, 2347, 2352, 2353, 2354, 2355, 2356, 2359, 2365, 2368, 2371, 2376, 2377, 2378, 2382, 2387, 2388, 2389, 2393, 2394, 2395, 2397, 2398, 2399, 2401, 2402, 2403, 2407, 2408, 2409, 2416, 2420, 2421, 2423, 2426, 2431, 2434, 2435, 2439, 2440, 2441, 2444, 2447, 2451, 2454, 2456, 2457, 2459, 2469, 2471, 2472, 2475, 2479, 2480, 2481, 2483, 2484, 2485, 2489, 2490, 2491, 2492, 2495, 2501, 2505, 2506, 2507, 2508, 2509, 2512, 2513, 2515, 2517, 2518, 2520, 2521, 2522, 2525, 2526, 2528, 2529, 2534, 2535, 2536, 2539, 2540, 2548, 2552, 2553, 2554, 2556, 2557, 2566, 2573, 2577, 2584, 2591, 2592, 2596, 2597, 2601, 2603, 2604, 2608, 2612, 2613, 2621, 2622, 2624, 2626, 2628, 2629, 2630, 2631, 2632, 2633, 2634, 2635, 2636, 2637, 2638, 2639, 2640, 2641, 2646, 2647, 2648, 2649, 2650, 2651, 2655, 2656, 2658, 2660, 2661, 2663, 2664, 2665, 2666, 2667, 2669, 2670, 2671, 2675, 2677, 2678, 2679, 2680, 2681, 2682, 2683, 2685, 2687, 2688, 2689, 2690, 2691, 2692, 2693, 2694, 2695, 2696, 2698, 2699, 2700, 2702, 2703, 2704, 2705, 2706, 2707, 2708, 2709, 2710, 2711, 2712, 2713, 2714, 2716, 2717, 2718, 2719, 2720, 2721, 2722, 2723, 2724, 2725, 2726, 2727, 2728, 2729, 2730, 2731, 2732, 2733, 2738, 2740, 2741, 2742, 2744, 2745, 2747, 2748, 2749, 2754, 2755, 2756, 2758, 2759, 2760, 2761, 2762, 2763, 2764, 2765, 2766, 2767, 2768, 2769, 2770, 2771, 2772, 2773, 2774, 2775, 2776, 2777, 2778, 2779, 2780, 2781, 2782, 2783, 2784, 2785, 2786, 2787, 2788, 2789, 2790, 2791, 2792, 2793, 2794, 2795, 2796, 2797, 2798, 2799, 2800, 2801, 2802, 2803, 2804, 2805, 2806, 2807, 2808, 2809, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2830, 2832, 2833, 2834, 2835, 2837, 2838, 2839, 2841, 2842, 2843, 2844, 2845, 2846, 2847, 2848, 2849, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2857, 2858, 2859, 2860, 2861, 2862, 2863, 2864, 2865, 2866, 2867, 2868, 2869, 2870, 2871, 2872, 2873, 2874, 2875, 2876, 2877, 2878, 2879, 2880, 2881, 2882, 2883, 2884, 2885, 2886, 2887, 2888, 2889, 2890, 2891, 2892, 2893, 2894, 2895, 2896, 2897, 2898, 2899, 2900, 2903, 2904, 2905, 2906, 2907, 2908, 2909, 2910, 2911, 2912, 2913, 2914, 2915, 2916, 2917, 2918, 2919, 2920, 2921, 2924, 2925, 2926, 2928, 2929, 2930, 2931, 2932, 2933, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2948, 2949, 2950, 2951, 2952, 2953, 2954, 2956, 2957, 2958, 2959, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967, 2968, 2969, 2970, 2971, 2972, 2973, 2974, 2975, 2976, 2977, 2978, 2979, 2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2997, 2998, 2999, 3000, 3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008, 3009, 3010, 3011, 3012, 3013, 3014, 3015, 3017, 3018, 3019, 3020, 3021, 3022, 3024, 3025, 3026, 3027, 3028, 3029, 3030, 3031, 3032, 3033, 3034, 3035, 3036, 3037, 3038, 3039, 3040, 3041, 3042, 3043, 3044, 3045, 3046, 3047, 3048, 3049, 3050, 3051, 3052, 3053, 3054, 3055, 3056, 3057, 3058, 3059, 3060, 3061, 3062, 3063, 3064, 3065, 3066, 3067, 3068, 3069, 3070, 3071, 3072, 3073, 3074, 3075, 3076, 3077, 3078, 3079, 3080, 3081, 3082, 3083, 3084, 3085, 3086, 3087, 3088, 3089, 3090, 3091, 3092, 3093, 3094, 3095, 3096, 3097, 3098, 34, 62, 69, 309, 329, 381, 382, 413, 419, 459, 535, 879, 897, 1205, 1343, 1346, 1381, 1382, 1383, 1387, 1426, 1427, 1486, 1498, 1506, 1554, 1576, 1584, 1597, 1601, 1634, 1648, 1710, 1765, 1777, 1924, 1925, 1944, 2027, 2071, 2248, 2273, 2286, 2294, 2327, 2338, 2351, 2364, 2404, 2410, 2455, 2460, 2494, 2519, 2527, 2532, 2533, 2562, 2563, 2564, 2567, 2568, 2569, 2570, 2571, 2662, 2701, 2743, 2810, 2831, 2840, 2922, 2955, 3023))
select * from adminhr.location 
select * from goals.`user` u 			
SHOW GRANTS FOR 'macarrillo'@'%';



select count(*) from goals.area 980 
select count(*) from goals.company 83
select count(*) from goals.cycle 94 
select count(*) from goals.goal 817
select count(*) from goals.goal_regs 1177 
select count(*) from goals.measure 8
select count(*) from goals.measure_type 4 
select count(*) from goals.migrations 35
select count(*) from goals.module 3 
select count(*) from goals.module_actions 29
select count(*) from goals.notification 892
select count(*) from goals.periodicity 6
select count(*) from goals.profile 3
select count(*) from goals.profile_has_module_actions 4554  
select count(*) from goals.status  14
select count(*) from goals.user 22305
select count(*) from goals.user_has_cycle 1056  

--- talentdb
select count(*) from talentdb.`_prisma_migrations` pm 26 
select count(*) from talentdb.assessments a 132018 
select count(*) from talentdb.assessments_answers aa 617701 
select count(*) from talentdb.assessments_categories ac 376350 
select count(*) from talentdb.assessments_definitions ad 937 
select count(*) from talentdb.assessments_types at2 1874 
select count(*) from talentdb.companies c 172 
select count(*) from talentdb.cut_points cp 99 
select count(*) from talentdb.dimensions d 123
select count(*) from talentdb.questions q 2043 
select count(*) from talentdb.questions_categories qc 34 
select count(*) from talentdb.questions_options qo 6129 
select count(*) from talentdb.results r 3 
select count(*) from talentdb.users u 37016

--- 360
select count(*) from `360_assessments`.`_prisma_migrations` 9 
select count(*) from `360_assessments`.`_questionTosurvey` qt 889 
select count(*) from `360_assessments`.answers a 16549
select count(*) from `360_assessments`.assignations a 3414 
select count(*) from `360_assessments`.axs_definitions ad 119 
select count(*) from `360_assessments`.company_competence_survey ccs 0 
select count(*) from `360_assessments`.company_competences cc 78
select count(*) from `360_assessments`.evaluations e 530 
select count(*) from `360_assessments`.linear_scales ls 2 
select count(*) from `360_assessments`.questions q 368 
select count(*) from `360_assessments`.result_ranges rr 359 
select count(*) from `360_assessments`.results_by_competence rbc 3073 
select count(*) from `360_assessments`.results_by_evaluation_type rbet 469 
select count(*) from `360_assessments`.surveys s 530 
select count(*) from `360_assessments`.users u 403 


SELECT 
    TABLE_SCHEMA, 
	TABLE_NAME, 
    TABLE_ROWS
    
FROM 
    information_schema.tables 
WHERE 
    TABLE_SCHEMA IN ('goals', '360_assessments', 'talentdb');


   
select * FROM mysql.user


SELECT NOW(), SLEEP(1), NOW();


UPDATE mysql.user
SET `plugin` = 'mysql_native_password',
    `authentication_string` = '*C60DE8CD9F334A1BA6AF892AC399A57CC3BD5851'
WHERE `Host` = '%' AND `User` = 'user_goals';


SELECT user FROM mysql.user WHERE USER like 'user_%'

ALTER USER 'user_goals'@'%' IDENTIFIED BY 'MYnUEVAcLAvE';

alter user 'user_centralization'@'%' identified by "lOJtUVocO775";
alter user 'user_middlware_reader'@'%' identified by "UdJ7Q7guyLfSiR";
alter user 'user_middleware'@'%' identified by "G7bJU72zZ6XwCBoy";


----------------------------------------------------- creacion usuarios --------------------------------------------------
create user user_360_assessments identified by "3604pPU3r%*";
create user user_analitycs identified by "gVtV99o92C5E";
create user user_api_questionnaire identified by "P97jKeQEQ@xa";
create user user_assessments identified by "3604pPU3r%*";
create user user_auth0 identified by "46McC?hRsPaN7Tjh50p+95";
create user user_centralization identified by "lOJtUVocO775";
create user user_crawlers identified by "t3MP0R4lpWD";
create user user_credentials identified by "kzQUbowWAX8fRwng";
create user user_datapipeline identified by "Ox20It4sNYIS";
create user user_etl_360_analitycs identified by "ssZd3Kr@zrYCjV3*";
create user user_goals identified by "Ub1T$T3st2024%*";
create user user_intranalytics_pipe identified by "jvkjZh!4bWYR7#@E";
create user user_lambda_downgrade identified by "chc6!jTDP9XcVJCj";
create user user_learning identified by "t3MP0R4lpWD";
create user user_learning_hub identified by "PwP8SGUJcffgsNXE";
create user user_learning_map_user identified by "TGhRuyWXGsKhwYv9";
create user user_liquibase identified by "t3MP0R4lpWD";
create user user_lms_creator identified by ")qUFPb4LrE8QwrXF";
create user user_lxp_lms_service identified by "Tr4sbWiPyN2NXP42";
create user user_lxp_lms_service_read identified by "KUTe7azgDbEAHHUi";
create user user_management identified by "46McC?hRsPaN7Tjh50p+95";
create user user_middleware identified by "G7bJU72zZ6XwCBoy";
create user user_middlware_reader identified by "UdJ7Q7guyLfSiR";
create user user_migration_adminhr identified by "EzmziRxb7ZJBXf8j";
create user user_moodle identified by "2puLz05NnOaW";
create user user_moodle_reader identified by "t3MP0R4lpWD";
create user user_opensearch identified by "t3MP0R4lpWD";
create user user_orgchart identified by "4Pp0rg(h4rt";
create user user_tars identified by "t3MP0R4lpWD";
create user user_users_sync identified by "AO=Ei6pGEt5Q";
create user user_api_user identified by "t3MP0R4lpWD";
create user user_enrollment_user identified by "t3MP0R4lpWD";
create user user_enrol_massive identified by "t3MP0R4lpWD";
create user user_learning_map_service identified by "t3MP0R4lpWD";




------------------------------ grants

GRANT USAGE ON *.* TO 'user_analitycs'@'%';
GRANT SELECT ON `talentdb`.* TO 'user_analitycs'@'%';
GRANT USAGE ON *.* TO 'user_api_questionnaire'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, ALTER ON `questionnaire`.* TO 'user_api_questionnaire'@'%';
GRANT USAGE ON *.* TO 'user_assessments'@'%';
GRANT SELECT ON `talendb`.* TO 'user_assessments'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `talentdb`.* TO 'user_assessments'@'%' WITH GRANT OPTION;
GRANT USAGE ON *.* TO 'user_auth0'@'%';
GRANT SELECT, INSERT, UPDATE ON `adminhr`.* TO 'user_auth0'@'%';
GRANT PROCESS, EVENT ON *.* TO 'user_centralization'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER ON `adminhr`.* TO 'user_centralization'@'%' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON `adminhr`.`city` TO 'user_centralization'@'%' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON `adminhr`.`country` TO 'user_centralization'@'%' WITH GRANT OPTION;
GRANT USAGE ON *.* TO 'user_crawlers'@'%';
GRANT SELECT, INSERT, UPDATE, ALTER ON `bitnami_moodle`.* TO 'user_crawlers'@'%';
GRANT USAGE ON *.* TO 'user_credentials'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `bitnami_moodle`.* TO 'user_credentials'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `bitnami_moodle_tars`.* TO 'user_credentials'@'%';
GRANT USAGE ON *.* TO 'user_datapipeline'@'%';
GRANT SELECT ON `bitnami_moodle`.* TO 'user_datapipeline'@'%';
GRANT SELECT ON `prod_logs_moodle`.* TO 'user_datapipeline'@'%';
GRANT USAGE ON *.* TO 'user_etl_360_analitycs'@'%';
GRANT SELECT ON `360_assessments`.* TO 'user_etl_360_analitycs'@'%';
GRANT USAGE ON *.* TO 'user_goals'@'%';
GRANT SELECT, INSERT, DELETE, REFERENCES, ALTER ON `adminhr`.* TO 'user_goals'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, ALTER ON `goals`.* TO 'user_goals'@'%';
GRANT DELETE ON `goals`.`user_has_cycle` TO 'user_goals'@'%';
GRANT USAGE ON *.* TO 'user_intranalytics_pipe'@'%';
GRANT SELECT, INSERT, UPDATE ON `adminhr`.* TO 'user_intranalytics_pipe'@'%';
GRANT SELECT, INSERT, UPDATE ON `talentdb`.* TO 'user_intranalytics_pipe'@'%';
GRANT SELECT, INSERT, UPDATE ON `learning_hub`.* TO 'user_intranalytics_pipe'@'%';
GRANT SELECT, INSERT, UPDATE ON `bitnami_moodle`.* TO 'user_intranalytics_pipe'@'%';
GRANT USAGE ON *.* TO 'user_lambda_downgrade'@'%';
GRANT SELECT, DELETE ON `adminhr`.`ubits_user_auth0_role` TO 'user_lambda_downgrade'@'%';
GRANT SELECT ON `adminhr`.`location` TO 'user_lambda_downgrade'@'%';
GRANT SELECT, INSERT, DELETE ON `adminhr`.`ubits_user_role` TO 'user_lambda_downgrade'@'%';
GRANT SELECT ON `adminhr`.`ubits_role` TO 'user_lambda_downgrade'@'%';
GRANT SELECT ON `adminhr`.`company` TO 'user_lambda_downgrade'@'%';
GRANT SELECT ON `adminhr`.`ubits_user` TO 'user_lambda_downgrade'@'%';
GRANT SELECT, DELETE ON `bitnami_moodle`.`mdl_role_assignments` TO 'user_lambda_downgrade'@'%';
GRANT SELECT, INSERT, UPDATE, DROP, ALTER ON *.* TO 'user_learning'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `bitnami_moodle`.* TO 'user_learning'@'%';
GRANT USAGE ON *.* TO 'user_learning_hub'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `learning_hub`.* TO 'user_learning_hub'@'%' WITH GRANT OPTION;
GRANT EVENT ON *.* TO 'user_learning_map_user'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `learning_map_test_2`.* TO 'user_learning_map_user'@'%' WITH GRANT OPTION;
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `learning_map_test`.* TO 'user_learning_map_user'@'%' WITH GRANT OPTION;
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, REFERENCES, ALTER, EXECUTE, CREATE ROUTINE, ALTER ROUTINE ON *.* TO 'user_liquibase'@'%';
GRANT USAGE ON *.* TO 'user_lms_creator'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, ALTER ON `lms_creator`.* TO 'user_lms_creator'@'%';
GRANT USAGE ON *.* TO 'user_lxp_lms_service'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `bitnami_moodle`.* TO 'user_lxp_lms_service'@'%' WITH GRANT OPTION;
GRANT USAGE ON *.* TO 'user_lxp_lms_service_read'@'%';
GRANT SELECT ON `bitnami_moodle`.* TO 'user_lxp_lms_service_read'@'%';
GRANT USAGE ON *.* TO 'user_management'@'%';
GRANT SELECT, INSERT, UPDATE ON `adminhr`.* TO 'user_management'@'%';
GRANT DELETE ON `adminhr`.`ubits_user_role` TO 'user_management'@'%';
GRANT DELETE ON `adminhr`.`ubits_user_auth0_role` TO 'user_management'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE ROUTINE, ALTER ROUTINE, LOAD FROM S3, SELECT INTO S3, INVOKE LAMBDA ON *.* TO 'user_middleware'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER, EXECUTE ON `bitnami_moodle`.* TO 'user_middleware'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER, EXECUTE ON `bitnami_moodle_tars`.* TO 'user_middleware'@'%';
GRANT SELECT ON `mysql`.`proc` TO 'user_middleware'@'%';
GRANT USAGE ON *.* TO 'user_middlware_reader'@'%';
GRANT EXECUTE ON `mysql`.* TO 'user_middlware_reader'@'%';
GRANT SELECT, EXECUTE ON `bitnami_moodle_tars`.* TO 'user_middlware_reader'@'%';
GRANT SELECT, EXECUTE ON `bitnami_moodle`.* TO 'user_middlware_reader'@'%';
GRANT SELECT ON `prod_logs_moodle`.* TO 'user_middlware_reader'@'%';
GRANT SELECT ON `mysql`.`proc` TO 'user_middlware_reader'@'%';
GRANT USAGE ON *.* TO 'user_migration_adminhr'@'%';
GRANT SELECT, INSERT, UPDATE, CREATE, INDEX, ALTER ON `adminhr`.* TO 'user_migration_adminhr'@'%';
GRANT SELECT, INSERT, UPDATE, ALTER ON `bitnami_moodle`.* TO 'user_migration_adminhr'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER, LOAD FROM S3, SELECT INTO S3, INVOKE LAMBDA ON *.* TO 'user_moodle'@'%' WITH GRANT OPTION;
GRANT USAGE ON *.* TO 'user_moodle_reader'@'%';
GRANT SELECT, EXECUTE ON `bitnami_moodle`.* TO 'user_moodle_reader'@'%';
GRANT SELECT ON `prod_logs_moodle`.* TO 'user_moodle_reader'@'%';
GRANT EXECUTE ON PROCEDURE `bitnami_moodle`.`getcompulsorycourseadvancepercentage` TO 'user_moodle_reader'@'%';
GRANT EXECUTE ON PROCEDURE `bitnami_moodle`.`getcompanyvalidities` TO 'user_moodle_reader'@'%';
GRANT USAGE ON *.* TO 'user_opensearch'@'%';
GRANT SELECT ON `bitnami_moodle`.* TO 'user_opensearch'@'%';
GRANT USAGE ON *.* TO 'user_orgchart'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE ON `adminhr`.* TO 'user_orgchart'@'%';
GRANT USAGE ON *.* TO 'user_tars'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `bitnami_moodle_tars`.* TO 'user_tars'@'%' WITH GRANT OPTION;
GRANT USAGE ON *.* TO 'user_users_sync'@'%';
GRANT SELECT, INSERT, UPDATE ON `adminhr`.* TO 'user_users_sync'@'%';
GRANT SELECT, INSERT, UPDATE ON `bitnami_moodle`.* TO 'user_users_sync'@'%';
GRANT USAGE ON *.* TO 'user_api_user'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, EXECUTE, SHOW VIEW ON `%`.* TO 'user_api_user'@'%';
GRANT USAGE ON *.* TO 'user_enrollment_user'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, EXECUTE, SHOW VIEW ON `bitnami_moodle`.* TO 'user_enrollment_user'@'%';
GRANT USAGE ON *.* TO 'user_enrol_massive'@'%';
GRANT SELECT ON `bitnami_moodle`.* TO 'user_enrol_massive'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `bitnami_moodle`.`mdl_role_assignments` TO 'user_enrol_massive'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `bitnami_moodle`.`mdl_user_enrolments` TO 'user_enrol_massive'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `bitnami_moodle`.`mdl_u_compulsory_course` TO 'user_enrol_massive'@'%';
GRANT USAGE ON *.* TO 'user_learning_map_service'@'%';
GRANT SELECT ON `learning_map_test`.* TO 'user_learning_map_service'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, ALTER ON `learning_map_test`.`user_course_plan` TO 'user_learning_map_service'@'%';


CREATE DEFINER=`user_moodle`@`%` PROCEDURE `bitnami_moodle`.`lxp_get_user_company_courses`(IN user_id int, IN sort varchar(50),
                                            IN page_size int, IN page int,
                                            IN params varchar(550), IN is_visible_in_app int,
                                            OUT cant int)
BEGIN
    DECLARE ordertype varchar (200);
    DECLARE offsets varchar (200) default '';
    DECLARE cal_offset varchar (200);
    DECLARE paramquery varchar(200) default '';
    DECLARE paramquery2 varchar(200) default '';
    set ordertype = REPLACE(REPLACE(sort,'[', ''),']', '') ;
    IF(page > 0) THEN
        set cal_offset=(page*page_size);
        set offsets = CONCAT("OFFSET ",cal_offset);
    END IF;
    IF(params != '') THEN
        set paramquery = CONCAT("HAVING ",params);
    END IF;
    IF (is_visible_in_app = 1) THEN
        set paramquery2 = CONCAT(' AND ca.is_visible_in_app = ', is_visible_in_app, ' ');
    END IF;
    set @sqlquery=CONCAT("SELECT SQL_CALC_FOUND_ROWS
        mc.id,
        mc.sortorder,
        mc.fullname as course_name,
        ccatg.`path`,
        mcc.id as academy_id,
        mcc.name as academy_name,
        mc.category as category_id,
        ccatg.name as category_name,
        CASE
            WHEN mf.filename IS NULL THEN '{environment_url}/theme/edumy/pix/default.jpg'
            ELSE CONCAT('{environment_url}/pluginfile.php/',mf.contextid,'/course/overviewfiles/',mf.filename)
        END as course_image_url,
        mup.partnership_name,
        mc.visible,
        cl.level,
        ce.fullname as expert,
        cc.content_type,
        '' as duration,
        IF(mcerti.id is not null, 100, IFNULL(CEIL((COUNT(cmc.id) / COUNT(mcm.id)) * 100), 0)) as progress_course
        FROM mdl_u_private_course mpc
        INNER JOIN mdl_u_user_additional_info muai ON (mpc.company_id = muai.mdl_u_company_id
                                                           AND mpc.active = 1
                                                           AND muai.mdl_user_id = ",user_id,")
        INNER JOIN mdl_course mc ON (mpc.course_id = mc.id AND mc.visible = 1)
        LEFT JOIN mdl_enrol me ON (mc.id = me.courseid AND me.status = 0)
        LEFT JOIN mdl_user_enrolments mue ON me.id = mue.enrolid AND mue.userid = ",user_id,"
        LEFT JOIN mdl_context mc2 ON mc.id =mc2.instanceId AND mc2.contextLevel =50
        LEFT JOIN mdl_block_instances mbi ON mc2.id=mbi.parentcontextid AND mbi.blockname ='ubits_course_features'
        LEFT JOIN mdl_files mf ON mc2.id = mf.contextId AND mf.filename <>'.' AND mf.component = 'course' AND mf.filearea = 'overviewfiles'
        LEFT JOIN mdl_u_course_additional_info ca ON mc.id = ca.course_id
        LEFT JOIN mdl_u_course_expert ce ON ca.expert_id  = ce.id
        LEFT JOIN mdl_u_course_level cl ON ca.level_id  = cl.id
        LEFT JOIN mdl_u_course_content_type cc ON ca.content_type_id  = cc.id
        LEFT JOIN mdl_u_course_partnership mucp ON mc.id = mucp.course_id
        LEFT JOIN mdl_u_partnership mup ON mucp.partnership_id = mup.id
        INNER JOIN mdl_course_categories as ccatg on mc.category = ccatg.id AND ccatg.parent != 1 AND ccatg.visible =1
        INNER JOIN (SELECT * FROM mdl_course_categories) mcc ON mcc.id=SUBSTR(SUBSTRING_INDEX(ccatg.`path` ,'/',2),2)
        LEFT JOIN mdl_course_modules mcm ON (mc.id = mcm.course
            AND mcm.deletioninprogress IS FALSE
            AND mcm.completion > 0
            AND mcm.visible = 1)
        LEFT JOIN mdl_course_modules_completion cmc ON (mcm.id = cmc.coursemoduleid
            AND cmc.completionstate >= 1
            AND cmc.userid = ",user_id,")
        LEFT JOIN mdl_certificate mcert on mc.id = mcert.course
        LEFT JOIN mdl_certificate_issues mcerti on (mcert.id = mcerti.certificateid and mcerti.userid = ",user_id,")
        WHERE (me.enrol = 'autoenrol' OR mue.userid IS NOT NULL) ", paramquery2, "
        GROUP BY mc.id, mc.fullname
     ",paramquery,"
    ORDER BY ", ordertype,"
    LIMIT ", page_size," ",offsets,";");
    PREPARE rowresult FROM @sqlquery;
    EXECUTE rowresult;
    SET cant:= FOUND_ROWS();
END